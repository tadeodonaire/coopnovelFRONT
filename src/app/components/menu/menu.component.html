<mat-sidenav-container class="sidenav-container">
  <mat-sidenav
    #drawer
    mode="side"
    [opened]="true"
    [class.collapsed]="!isExpanded"
    class="sidenav"
  >
    <button mat-icon-button (click)="toggleMenu()" class="toggle-button">
      <mat-icon>menu</mat-icon>
    </button>

    <mat-nav-list>
      <!-- USUARIOS -->
      <button
        mat-button
        [matMenuTriggerFor]="USUARIOS"
        routerLink="/usuarios"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>person</mat-icon>
        <span *ngIf="isExpanded">Usuarios</span>
      </button>

      <!-- BIBLIOTECA -->
      <button
        mat-button
        [matMenuTriggerFor]="BIBLIOTECA"
        routerLink="/biblioteca"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>menu_book</mat-icon>
        <span *ngIf="isExpanded">Biblioteca</span>
      </button>

      <!-- PROYECTO -->
      <button
        mat-button
        [matMenuTriggerFor]="PROYECTO"
        routerLink="/proyecto"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>work</mat-icon>
        <span *ngIf="isExpanded">Proyecto</span>
      </button>

      <!-- NOVELA -->
      <button
        mat-button
        [matMenuTriggerFor]="NOVELA"
        routerLink="/novela"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>auto_stories</mat-icon>
        <span *ngIf="isExpanded">Novela</span>
      </button>

      <!-- CAP√çTULO -->
      <button
        mat-button
        [matMenuTriggerFor]="CAPITULO"
        routerLink="/capitulo"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>receipt</mat-icon>
        <span *ngIf="isExpanded">Cap√≠tulo</span>
      </button>

      <!-- REUNION -->
      <button
        mat-button
        [matMenuTriggerFor]="REUNION"
        routerLink="/reunion"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>people</mat-icon>
        <span *ngIf="isExpanded">Reuni√≥n</span>
      </button>

      <!-- DESCARGAS -->
      <button
        mat-button
        [matMenuTriggerFor]="DESCARGAS"
        routerLink="/descargas"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>cloud_download</mat-icon>
        <span *ngIf="isExpanded">Descargas</span>
      </button>

      
      <!-- COMENTARIOS -->
      <button mat-button [matMenuTriggerFor]="COMENTARIOS">
        <mat-icon>comment</mat-icon>
        <span *ngIf="isExpanded">Comentarios</span>
      </button>

      <!--TODOS LAS DIRECCIONES ANTES DE REPORTES (REPORTES POR ORDEN VA AL √öLTIMO)-->

      <!-- REPORTE -->
      <button
        mat-button
        [matMenuTriggerFor]="REPORTES"
        routerLinkActive="active-link"
        [routerLinkActiveOptions]="{ exact: false }"
      >
        <mat-icon>report</mat-icon>
        <span *ngIf="isExpanded">Reportes</span>
      </button>
    </mat-nav-list>

    <!-- LIBRO RECOMENDADO -->
    <div class="libro-recomendado p-2">
      <!-- √çcono colapsado -->
      <div *ngIf="!isExpanded" class="libro-icono">
        <mat-icon style="font-size: 32px;">menu_book</mat-icon>
      </div>

      <!-- Contenido expandido -->
      <div *ngIf="isExpanded">
        <h4 style="margin-top: 1rem">üìö Recomendaci√≥n del d√≠a</h4>

        <div *ngIf="imagen">
          <img
            [src]="imagen"
            [alt]="titulo"
            style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem"
          />
        </div>

        <div style="font-weight: bold">{{ titulo }}</div>
        <div style="font-size: 0.9rem; color: gray">{{ autor }}</div>
      </div>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Men√∫s desplegables (no necesitan routerLinkActive) -->
<mat-menu #USUARIOS="matMenu">
  <button mat-menu-item routerLink="/usuarios">Listar</button>
  <button mat-menu-item routerLink="/usuarios/insertar">Registrar</button>
</mat-menu>

<mat-menu #BIBLIOTECA="matMenu">
  <button mat-menu-item routerLink="/biblioteca">Listar</button>
  <button mat-menu-item routerLink="/biblioteca/insertar">Registrar</button>
</mat-menu>

<mat-menu #PROYECTO="matMenu">
  <button mat-menu-item routerLink="/proyecto">Listar</button>
  <button mat-menu-item routerLink="/proyecto/insertar">Registrar</button>
</mat-menu>

<mat-menu #NOVELA="matMenu">
  <button mat-menu-item routerLink="/novela">Listar</button>
  <button mat-menu-item routerLink="/novela/insertar">Registrar</button>
</mat-menu>

<mat-menu #CAPITULO="matMenu">
  <button mat-menu-item routerLink="/capitulo">Listar</button>
  <button mat-menu-item routerLink="/capitulo/insertar">Registrar</button>
</mat-menu>

<mat-menu #REUNION="matMenu">
  <button mat-menu-item routerLink="/reunion">Listar</button>
  <button mat-menu-item routerLink="/reunion/insertar">Registrar</button>
</mat-menu>

<mat-menu #DESCARGAS="matMenu">
  <button mat-menu-item routerLink="/descargas">Listar</button>
  <button mat-menu-item routerLink="/descargas/insertar">Registrar</button>
<<<<<<<<< Temporary merge branch 1
</mat-menu>

<mat-menu #COMENTARIOS="matMenu">
  <button mat-menu-item routerLink="/comentario">Listar</button>
  <button mat-menu-item routerLink="/comentario/insertar">Registrar</button>
</mat-menu>

<mat-menu #REPORTES="matMenu">
  <button mat-menu-item routerLink="/reportes">Edad</button>
  <button mat-menu-item routerLink="/reportes/reportecapitulosdescargados">CapDescargados</button>
  <button mat-menu-item routerLink="/reportes/reportecomentariosxusuarios">Cantidad Comentarios</button>
  <button mat-menu-item routerLink="/reportes/numero-capitulo">Cantidad de Capitulos</button>
</mat-menu>
