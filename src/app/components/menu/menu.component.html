<mat-sidenav-container class="sidenav-container" *ngIf="verificar()">
  <mat-sidenav
    #drawer
    mode="side"
    [opened]="true"
    [class.collapsed]="!isExpanded"
    class="sidenav"
  >
    <button mat-icon-button (click)="toggleMenu()" class="toggle-button">
      <mat-icon>menu</mat-icon>
    </button>

    <mat-nav-list>
      <!--HOME-->
      <button mat-button [routerLink]="['/homes']">
        <mat-icon>home</mat-icon>
        <span *ngIf="isExpanded">Home</span>
      </button>

      <!-- USUARIOS -->
      <button mat-button [matMenuTriggerFor]="USUARIOS">
        <mat-icon>person</mat-icon>
        <span *ngIf="isExpanded">Usuarios</span>
      </button>

      <!-- BIBLIOTECA -->
      <button mat-button [matMenuTriggerFor]="BIBLIOTECA">
        <mat-icon>menu_book</mat-icon>
        <span *ngIf="isExpanded">Biblioteca</span>
      </button>

      <!-- PROYECTO -->
      <button mat-button [matMenuTriggerFor]="PROYECTO">
        <mat-icon>work</mat-icon>
        <span *ngIf="isExpanded">Proyecto</span>
      </button>

      <!-- NOVELA -->
      <button mat-button [matMenuTriggerFor]="NOVELA">
        <mat-icon>auto_stories</mat-icon>
        <span *ngIf="isExpanded">Novela</span>
      </button>

      <!-- CAP√çTULO -->
      <button mat-button [matMenuTriggerFor]="CAPITULO">
        <mat-icon>receipt</mat-icon>
        <span *ngIf="isExpanded">Cap√≠tulo</span>
      </button>

      <!-- REUNION -->
      <button mat-button [matMenuTriggerFor]="REUNION">
        <mat-icon>people</mat-icon>
        <span *ngIf="isExpanded">Reuni√≥n</span>
      </button>

      <!-- DESCARGAS -->
      <button mat-button [matMenuTriggerFor]="DESCARGAS">
        <mat-icon>cloud_download</mat-icon>
        <span *ngIf="isExpanded">Descargas</span>
      </button>

      <!-- COMENTARIOS -->
      <button mat-button [matMenuTriggerFor]="COMENTARIOS">
        <mat-icon>comment</mat-icon>
        <span *ngIf="isExpanded">Comentarios</span>
      </button>

      <!-- ROLES -->
      <button mat-button [matMenuTriggerFor]="ROLES">
        <mat-icon>supervisor_account</mat-icon>
        <span *ngIf="isExpanded">Roles</span>
      </button>

      <!--TODOS LAS DIRECCIONES ANTES DE REPORTES (REPORTES POR ORDEN VA AL √öLTIMO)-->

      <!-- REPORTE -->
      <button mat-button [matMenuTriggerFor]="REPORTES">
        <mat-icon>report</mat-icon>
        <span *ngIf="isExpanded">Reportes</span>
      </button>

      <button mat-button [matMenuTriggerFor]="menuSalir" class="btn-rojo">
        <mat-icon>person</mat-icon>
        <span *ngIf="isExpanded">Usuario</span>
      </button>
    </mat-nav-list>

    <!-- LIBRO RECOMENDADO -->
    <div class="libro-recomendado p-2">
      <!-- √çcono colapsado -->
      <div *ngIf="!isExpanded" class="libro-icono">
        <mat-icon style="font-size: 32px">menu_book</mat-icon>
      </div>

      <!-- Contenido expandido -->
      <div *ngIf="isExpanded">
        <h4 style="margin-top: 1rem">üìö Recomendaci√≥n del d√≠a</h4>

        <div *ngIf="imagen">
          <img
            [src]="imagen"
            [alt]="titulo"
            style="width: 100%; border-radius: 8px; margin-bottom: 0.5rem"
          />
        </div>

        <div style="font-weight: bold">{{ titulo }}</div>
        <div style="font-size: 0.9rem; color: gray">{{ autor }}</div>
      </div>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <router-outlet></router-outlet>
  </mat-sidenav-content>
</mat-sidenav-container>

<!-- Men√∫s desplegables (no necesitan routerLinkActive) -->
<mat-menu #USUARIOS="matMenu">
  <button mat-menu-item routerLink="/usuarios">Listar</button>
  <button mat-menu-item routerLink="/usuarios/insertar">Registrar</button>
</mat-menu>

<mat-menu #BIBLIOTECA="matMenu">
  <button mat-menu-item routerLink="/biblioteca">Listar</button>
  <button mat-menu-item routerLink="/biblioteca/insertar">Registrar</button>
</mat-menu>

<mat-menu #PROYECTO="matMenu">
  <button mat-menu-item routerLink="/proyecto">Listar</button>
  <button mat-menu-item routerLink="/proyecto/insertar">Registrar</button>
</mat-menu>

<mat-menu #NOVELA="matMenu">
  <button mat-menu-item routerLink="/novela">Listar</button>
  <button mat-menu-item routerLink="/novela/insertar">Registrar</button>
</mat-menu>

<mat-menu #CAPITULO="matMenu">
  <button mat-menu-item routerLink="/capitulo">Listar</button>
  <button mat-menu-item routerLink="/capitulo/insertar">Registrar</button>
</mat-menu>

<mat-menu #REUNION="matMenu">
  <button mat-menu-item routerLink="/reunion">Listar</button>
  <button mat-menu-item routerLink="/reunion/insertar">Registrar</button>
</mat-menu>

<mat-menu #DESCARGAS="matMenu">
  <button mat-menu-item routerLink="/descargas">Listar</button>
  <button mat-menu-item routerLink="/descargas/insertar">Registrar</button>
</mat-menu>

<mat-menu #COMENTARIOS="matMenu">
  <button mat-menu-item routerLink="/comentario">Listar</button>
  <button mat-menu-item routerLink="/comentario/insertar">Registrar</button>
</mat-menu>

<mat-menu #ROLES="matMenu">
  <button mat-menu-item routerLink="/roles">Listar</button>
  <button mat-menu-item routerLink="/roles/insertar">Registrar</button>
</mat-menu>

<mat-menu #REPORTES="matMenu">
  <button mat-menu-item routerLink="/reportes">Edad</button>
  <button mat-menu-item routerLink="/reportes/reportecapitulosdescargados">
    CapDescargados
  </button>
  <button mat-menu-item routerLink="/reportes/reportecomentariosxusuarios">
    Cantidad Comentarios
  </button>
  <button mat-menu-item routerLink="/reportes/numero-capitulo">
    Cantidad de Capitulos
  </button>
  <button mat-menu-item routerLink="/reportes/SusccripcionMes">
    Suscripciones Por mes
  </button>
</mat-menu>

<mat-menu #menuSalir="matMenu">
  <button mat-menu-item routerLink="login" (click)="cerrar()">
    <mat-icon>logout</mat-icon>
    <span>Cerrar sesi√≥n</span>
  </button>
  <button mat-menu-item>
    Rol:
    <span>{{ role }}</span>
  </button>
</mat-menu>
